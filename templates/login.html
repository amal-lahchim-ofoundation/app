<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Chat Psychologist A.I.</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="{{ url_for('static', filename='assets/img/apple-touch-icon.png') }}" rel="apple-touch-icon">
    <link href="{{ url_for('static', filename='assets/img/favicon.png') }}" rel="icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files and Template Main CSS File -->
    <link href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/animate.css/animate.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/aos/aos.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/boxicons/css/boxicons.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/glightbox/css/glightbox.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.css') }}" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

     <!-- Template Main CSS File -->
  <link href="../static/assets/css/style.css" rel="stylesheet">
   <!-- Template Main CSS File -->
   <link href="../static/assets/css/login.css" rel="/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

</head>
<body class="login-body" >
  <!-- Navbar -->
  <nav  class="login-nav fixed-top top-0 d-flex align-items-center py-2">
    <div class="container-fluid container-xl d-flex align-items-center  justify-content-lg-between">
      <div class="d-flex">
        <img src="{{ url_for('static', filename='../static/assets/img/logo.png') }}" alt="Logo" class="ph1-logo">
        <h1 class="logo me-auto me-lg-0"><a href="{{ url_for('home') }}">ChatPsychologistAI</a></h1>
      </div>
      <div class="d-flex">
        <a href="{{ url_for('home') }}" class="book-a-table-btn scrollto d-none d-lg-flex">Home</a>
        <a href="{{ url_for('logout') }}" class="book-a-table-btn scrollto d-none d-lg-flex">Our Services</a> 
      </div>
    </div>
  </nav>

  <main id="main">
    <section>
      <div class="container mt-5">
        <form action="/login" method="post" class="login-form shadow-sm bg-white">
          <h2 class="mb-4 text-center">Log in</h2>
          <div class="mb-3">
            <label for="random_key" class="form-label">Random Key</label>
            <input type="text" class="form-control" id="random_key" placeholder="Enter Your Random Key" name="random_key" required>
          </div>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" id="password" placeholder="Enter Your Password" name="password" required>
          </div>
          <div class="d-grid">
            <button type="submit" data-bs-toggle="modal" data-bs-target="#buy-ticket-modal" data-ticket-type="premium-access" value="login">LOGIN</button>
          </div>
            <p class="message mt-3 text-center">Not registered? <a href="{{ url_for('register') }}" data-bs-toggle="modal" data-bs-target="#registerModal">Create an account</a></p>
        </form>
      </div>
    </section>
    <!-- Flash Message Modal -->
    <div class="modal fade" id="flashModal" tabindex="-1" role="dialog" aria-labelledby="flashModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="flashModalLabel">
              <i class="fas fa-exclamation-triangle me-2"></i>
              Warning
            </h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            {% with messages = get_flashed_messages() %}
            {% if messages %}
              {% for message in messages %}
                <p>{{ message }}</p>
              {% endfor %}
            {% endif %}
            {% endwith %}
          </div>
        </div>
      </div>
    </div>
    <!-- Register Modal -->
    <div class="modal fade" id="registerModal" tabindex="-1" role="dialog" aria-labelledby="registerModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="registerModalLabel">Warning : Privacy by Design</h5>
          </div>
          <div class="modal-body">
            To safeguard your privacy, we do not collect any personally identifiable information. 
            Instead, we generate a unique key as your identifier, which serves as your username. 
            This key, along with your password, is your sole access to your account. Please store both securely, 
            as they cannot be recovered if lost.
            <div class="form-check mt-3">
              <input class="form-check-input" type="checkbox" id="confirmCheckbox">
              <label class="form-check-label" for="confirmCheckbox">
                I confirm that I have read and understood the above text
              </label>
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn-orange" id="okButton" data-dismiss="modal" disabled>OK</button>
          </div>
        </div>
      </div>
    </div>
  </main><!-- End #main -->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Function to show the modal
      function showFlashModal() {
        const modal = new bootstrap.Modal(document.getElementById('flashModal'));
        modal.show();
      }
    
      // Check if there are any flash messages
      const flashMessages = document.querySelector('.modal-body');
      if (flashMessages && flashMessages.children.length > 0) {
        showFlashModal();
      }
    
      // Close button functionality
      document.querySelectorAll('.close').forEach(function(closeButton) {
        closeButton.addEventListener('click', function() {
          const modal = bootstrap.Modal.getInstance(this.closest('.modal'));
          modal.hide();
        });
      });


      // Initialize the register modal with static backdrop and no keyboard close
      const registerModal = new bootstrap.Modal(document.getElementById('registerModal'), {
        backdrop: 'static',
        keyboard: false
      });

    // Enable OK button when checkbox is checked
      document.getElementById('confirmCheckbox').addEventListener('change', function() {
      document.getElementById('okButton').disabled = !this.checked;
    });

    // Redirect to registration page when OK button is clicked
    document.getElementById('okButton').addEventListener('click', function() {
      if (!this.disabled) {
        window.location.href = "{{ url_for('register') }}";
      }
    });
  });
    
      sessionStorage.clear();
  </script>
  <!-- Scripts -->
  <script src="{{ url_for('static', filename='assets/vendor/aos/aos.js') }}"></script>
 
  <script src="{{ url_for('static', filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/glightbox/js/glightbox.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/isotope-layout/isotope.pkgd.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/php-email-form/validate.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.js') }}"></script>
  <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>

</body>

</html>