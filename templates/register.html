<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title>Chat Psychologist A.I.</title>
    <meta content="" name="description">
    <meta content="" name="keywords">

    <!-- Favicons -->
    <link href="{{ url_for('static', filename='assets/img/apple-touch-icon.png') }}" rel="apple-touch-icon">
    <link href="{{ url_for('static', filename='assets/img/favicon.png') }}" rel="icon">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

    <!-- Vendor CSS Files and Template Main CSS File -->
    <link href="{{ url_for('static', filename='assets/css/style.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/animate.css/animate.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/aos/aos.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/bootstrap-icons/bootstrap-icons.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/boxicons/css/boxicons.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/glightbox/css/glightbox.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.css') }}" rel="stylesheet">

     <!-- Template Main CSS File -->
  <link href="../static/assets/css/style.css" rel="stylesheet">
   <!-- Template Main CSS File -->
   <link href="../static/assets/css/login.css" rel="stylesheet">

   <!-- Bootstrap 5 CSS -->
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- jQuery and Bootstrap JS -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.8/clipboard.min.js"></script>


<style>


</style>

</head>
<body class="login-body">
  <!-- Navbar -->
  <nav class="login-nav fixed-top top-0 d-flex align-items-center py-2">
    <div class="container-fluid container-xl d-flex align-items-center  justify-content-lg-between">
      <div class="d-flex">
        <img src="{{ url_for('static', filename='../static/assets/img/logo.png') }}" alt="Logo" class="ph1-logo">
        <h1 class="logo me-auto me-lg-0"><a href="{{ url_for('home') }}" class="text-decoration-none">ChatPsychologistAI</a></h1>
      </div>
      <div class="d-flex">
        <a href="{{ url_for('home') }}" class="book-a-table-btn scrollto d-none d-lg-flex text-decoration-none">Home</a>
        <a href="{{ url_for('login') }}" class="book-a-table-btn scrollto d-none d-lg-flex text-decoration-none">Login</a>
      </div>
    </div>
  </nav>

  <main id="main" class="main-page">
    <section>
      <div class="container mt-5">
        <form id="registerForm" action="{{ url_for('register') }}" class="login-form shadow-sm bg-white"  method="post">
          <h2 class="mb-4 text-center">Register</h2>
          <div class="mb-3">
            <label for="password" class="form-label">Password</label>
            <input type="password" class="form-control" placeholder="Password" name="pass" value=""/> 
          </div>
          <div class="mb-3">
            <label for="confirm_password" class="form-label">Confirm Password</label>
            <input type="password" class="form-control" placeholder=" Repeat password" name="pass2" value=""/> 
          </div>              
          <button class="submit-btn" data-bs-toggle="modal" data-bs-target="#buy-ticket-modal" data-ticket-type="premium-access" value="register">Register</button>
          <p class="message mt-3 text-center">Already registered? <a href="{{ url_for('login') }}">Sign In</a></p>
        </form>

      </div>
    </section>
    <!-- Random key modal -->
    <section>
      <div class="modal fade" id="flashModal" tabindex="-1" role="dialog1" aria-labelledby="flashModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="flashModalLabel">Message</h5>
              <button class="btn-orange" id="randomKeyCopyButton" data-clipboard-target="#randomKeyCopyButton">Copy</button>
            </div>
            <div class="modal-body">
              <!-- Flash message will display here -->
            </div>
            <div class="modal-footer">
              <a href="{{url_for('register')}}" class="btn-orange">Cancel</a>
              <a href="{{url_for('login')}}" class="btn-orange" style="display: none;">Login</a> 
              <input type="text" class="form-control" id="randomKeyInput" value="{{ session['random_key'] }}" readonly style="display:none;"/>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main><!-- End #main -->
    <script>
      $('.message a').click(function(){
        $('form').animate({height: "toggle", opacity: "toggle"}, "slow");
      });
      $(document).ready(function() {
        {% with messages = get_flashed_messages(category_filter=['success']) %}
          {% if messages %}
            $(".modal-body").text("{{ messages[0] }}");
            $(".modal-footer a").show();  // Show the Login button
            document.getElementById('randomKeyCopyButton').style="display: inline-block";
            var myModal = new bootstrap.Modal(document.getElementById('flashModal'), {});
            myModal.show();
          {% else %}
            {% with messages = get_flashed_messages() %}
              {% if messages %}
                $(".modal-body").text("{{ messages[0] }}");
                $(".modal-footer a").hide();  // Hide the Login button
                var myModal = new bootstrap.Modal(document.getElementById('flashModal'), {});
                myModal.show();
              {% endif %}
            {% endwith %}
          {% endif %}
        {% endwith %}
      });
      document.addEventListener('DOMContentLoaded', (event) => {
        const copyButton = document.getElementById('randomKeyCopyButton');
        const copyText = document.getElementById('randomKeyInput');
    
        if (copyButton && copyText) {
          copyButton.addEventListener('click', function() {
            if (!navigator.clipboard) {
              console.error('Clipboard API not available');
              return;
            }
    
            navigator.clipboard.writeText(copyText.value).then(() => {
              // Change button appearance to indicate success
              copyButton.textContent = 'Copied!';
              copyButton.style.backgroundColor = '#efb947';
    
              // Revert button appearance after 2 seconds
              setTimeout(() => {
                copyButton.textContent = 'Copy';
                copyButton.style.backgroundColor = '#E28647';
              }, 2000);
            }).catch(err => {
              console.error('Error copying to clipboard: ', err);
            });
          });
        }
      });
    </script>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='assets/vendor/aos/aos.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/vendor/bootstrap/js/bootstrap.bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/vendor/glightbox/js/glightbox.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/vendor/isotope-layout/isotope.pkgd.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/vendor/php-email-form/validate.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/vendor/swiper/swiper-bundle.min.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/main.js') }}"></script>
    <script src="{{ url_for('static', filename='assets/js/firebase.js') }}"></script>

</body>

</html>